<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Badminton Attendance - July 2025</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 0 10px 60px;
    }

    header {
      width: 100%;
      height: 130px;
      background: url('https://images.unsplash.com/photo-1598514982884-616ee042a535?auto=format&fit=crop&w=800&q=80') no-repeat center center/cover;
      text-align: center;
      padding-top: 30px;
      box-shadow: inset 0 0 0 2000px rgba(0, 0, 0, 0.5);
      margin-bottom: 20px;
    }

    header h1 {
      margin: 0;
      font-size: 1.8rem;
      font-weight: 700;
      text-shadow: 0 0 8px #00ffcc;
    }

    main {
      width: 100%;
      max-width: 700px;
      background: rgba(255 255 255 / 0.1);
      border-radius: 10px;
      box-shadow: 0 0 15px #00ffccaa;
      padding: 15px;
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95rem;
    }

    th,
    td {
      padding: 10px;
      text-align: center;
      border-bottom: 1px solid rgba(255 255 255 / 0.2);
      white-space: nowrap;
    }

    th {
      background: rgba(0, 204, 131, 0.7);
      font-weight: 600;
      letter-spacing: 1.1px;
    }

    tbody tr:nth-child(even) {
      background: rgba(255 255 255 / 0.05);
    }

    tbody tr:hover {
      background: rgba(0, 204, 131, 0.3);
    }

    .ranking {
      font-weight: 700;
      color: #00e676;
    }

    .note {
      text-align: center;
      font-size: 0.9rem;
      margin-top: 10px;
      color: #ffcc00;
    }

    .last-updated {
      margin-top: 20px;
      font-size: 0.9rem;
      font-weight: bold;
      color: #ffea00;
      text-shadow: 0 0 5px #000;
    }

    .spin-wheel-container {
      margin-top: 25px;
      text-align: center;
    }

    .spin-wheel-image {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      box-shadow: 0 0 15px #00ffc8;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .spin-wheel-image:hover {
      transform: scale(1.1);
    }

    .spin-wheel-text {
      color: #00ffcc;
      font-weight: bold;
      margin-top: 8px;
      font-size: 1rem;
    }

    button.view-dates-btn {
      background: #00e676;
      border: none;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 0.85rem;
      color: #003300;
      font-weight: bold;
      cursor: pointer;
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal {
      background: #002222;
      color: #b2f2bb;
      max-width: 90vw;
      max-height: 80vh;
      overflow-y: auto;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 15px #00ffcc;
      font-size: 1rem;
      line-height: 1.4;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 14px;
      background: transparent;
      border: none;
      font-size: 1.5rem;
      color: #00ffcc;
      cursor: pointer;
    }

    @media (max-width: 480px) {
      header h1 {
        font-size: 1.3rem;
      }

      table {
        font-size: 0.85rem;
      }

      th,
      td {
        padding: 8px 6px;
      }
    }
  </style>
</head>

<body>

  <header>
    <h1>üè∏ Attendance Summary - July 2025</h1>
  </header>

  <main>
    <table>
      <thead>
        <tr>
          <th>Sr. No</th>
          <th>Name</th>
          <th>Attendance %</th>
          <th>Ranking</th>
          <th>Dates</th>
        </tr>
      </thead>
      <tbody id="summary-tbody"></tbody>
    </table>

    <div class="note">üìå Rewards loading only for eligible participants üéÅ</div>

    <!-- Replaced circle loader with clickable Spin the Wheel image -->
    <div class="spin-wheel-container">
      <a href="spinner.html" target="_blank" rel="noopener noreferrer">
        <img src="https://cdn-icons-png.flaticon.com/512/4315/4315445.png" alt="Spin the Wheel"
          class="spin-wheel-image" />
        <div class="spin-wheel-text">üéÅ Spin to Win</div>
      </a>
    </div>

    <br><br>

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Attendance %</th>
          <th>Note</th>
          <th>Dates</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Nehru</td>
          <td id="nehru-percent">100%</td>
          <td style="color:#ffcc00;font-weight:bold;">Not considered for ranking/rewards<br>(From July 14 to July 31)
          </td>
          <td><button class="view-dates-btn" data-name="Nehru">View Dates</button></td>
        </tr>
      </tbody>
    </table>

    <div class="last-updated">üìÖ Last updated on: July 30, 2025</div>
  </main>

  <div id="modalOverlay" class="modal-overlay">
    <div class="modal">
      <button class="modal-close">&times;</button>
      <h2>Attendance Dates</h2>
      <ul id="datesList"></ul>
    </div>
  </div>

  <script>
    const friends = ["Balaji", "Bala Krishnan", "Darshan", "Prem", "Vasanth", "Vicky", "Vinoth"];
    const newMember = "Nehru";

    const attendanceData = {
      "July 1": ["Balaji", "Darshan", "Prem", "Vasanth", "Vicky", "Vinoth"],
      "July 2": ["Balaji", "Darshan", "Bala Krishnan", "Prem", "Vasanth", "Vicky", "Vinoth"],
      "July 3": ["Balaji", "Darshan", "Prem", "Vasanth", "Vicky", "Vinoth"],
      "July 4": ["Balaji", "Darshan", "Bala Krishnan", "Prem", "Vasanth", "Vicky", "Vinoth"],
      "July 5": ["Balaji", "Darshan", "Bala Krishnan", "Prem", "Vasanth", "Vicky", "Vinoth"],
      "July 6": ["Balaji", "Darshan", "Vasanth", "Vinoth"],
      "July 7": ["Balaji", "Darshan", "Bala Krishnan", "Vasanth", "Vicky"],
      "July 8": ["Darshan", "Prem", "Vasanth", "Vicky", "Vinoth"],
      "July 9": ["Balaji", "Prem", "Vasanth", "Vicky", "Vinoth", "Bala Krishnan"],
      "July 10": ["Balaji", "Darshan", "Prem", "Vinoth", "Vicky"],
      "July 11": ["Balaji", "Darshan", "Prem", "Vasanth", "Vicky", "Vinoth"],
      "July 12": ["Balaji", "Darshan", "Bala Krishnan", "Vicky", "Vinoth", "Vasanth"],
      "July 13": [],
      "July 14": ["Darshan", "Bala Krishnan", "Vinoth", "Vasanth", "Nehru"],
      "July 15": ["Balaji", "Bala Krishnan", "Prem", "Vasanth", "Vicky", "Vinoth", "Nehru"],
      "July 16": ["Balaji", "Prem", "Vasanth", "Vicky", "Vinoth", "Nehru"],
      "July 17": ["Bala Krishnan", "Darshan", "Prem", "Vasanth", "Vicky", "Nehru"],
      "July 18": ["Darshan", "Prem", "Vasanth", "Vicky", "Vinoth", "Nehru"],
      "July 19": ["Balaji", "Darshan", "Prem", "Vicky", "Vinoth", "Nehru"],
      "July 20": ["Balaji", "Darshan", "Prem", "Vasanth", "Vinoth", "Bala Krishnan"],
      "July 21": ["Balaji", "Prem", "Bala Krishnan", "Vasanth", "Vicky"],
      "July 22": ["Balaji", "Prem", "Darshan", "Vicky", "Vasanth", "Vinoth"],
      "July 23": ["Prem", "Vicky"],
      "July 24": ["Prem", "Bala Krishnan", "Vasanth", "Vicky", "Vinoth"],
      "July 25": ["Balaji", "Vasanth", "Vicky"],
      "July 26": ["Darshan", "Balaji", "Bala Krishnan", "Vasanth", "Vicky", "Prem", "Vinoth"],
      "July 27": [],
      "July 28": ["Darshan", "Balaji", "Bala Krishnan", "Vasanth", "Vicky", "Prem"],
      "July 29": ["Darshan", "Balaji", "Vasanth", "Vicky", "Prem"],
      "July 30": ["Balaji", "Vasanth", "Vicky", "Prem"],
    };

    const totalDays = Object.entries(attendanceData).filter(([_, list]) => list.length).length;

    const attendanceInfo = {};
    friends.forEach(name => attendanceInfo[name] = { count: 0, dates: [] });

    for (const [date, players] of Object.entries(attendanceData)) {
      players.forEach(p => {
        if (friends.includes(p)) {
          attendanceInfo[p].count++;
          attendanceInfo[p].dates.push(date);
        }
      });
    }

    const attendanceArray = friends.map(name => {
      const info = attendanceInfo[name];
      const percent = (info.count / totalDays) * 100;
      return { name, count: info.count, percent, dates: info.dates };
    }).sort((a, b) => b.percent - a.percent || a.name.localeCompare(b.name));

    let rank = 0, lastPercent = null, skip = 0;
    attendanceArray.forEach((item, i) => {
      if (item.percent !== lastPercent) {
        rank += 1 + skip;
        skip = 0;
      } else skip++;
      item.rank = rank;
      lastPercent = item.percent;
    });

    const tbody = document.getElementById("summary-tbody");
    attendanceArray.forEach((item, idx) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
      <td>${idx + 1}</td>
      <td>${item.name}</td>
      <td>${item.percent.toFixed(1)}%</td>
      <td class="ranking">${item.rank}</td>
      <td><button class="view-dates-btn" data-name="${item.name}">View Dates</button></td>
    `;
      tbody.appendChild(tr);
    });

    const nehruDates = [
      "July 14", "July 15", "July 16", "July 17", "July 18", "July 19",
      "July 21", "July 22", "July 24", "July 25", "July 28", "July 29"
    ];
    const nehruPercent = (nehruDates.length / 14) * 100;
    document.getElementById("nehru-percent").textContent = `${nehruPercent.toFixed(1)}%`;

    const modalOverlay = document.getElementById('modalOverlay');
    const datesList = document.getElementById('datesList');
    const modalCloseBtn = modalOverlay.querySelector('.modal-close');

    document.body.addEventListener('click', e => {
      if (e.target.classList.contains('view-dates-btn')) {
        const name = e.target.dataset.name;
        datesList.innerHTML = '';
        const dates = (name === newMember)
          ? nehruDates
          : attendanceArray.find(p => p.name === name).dates;
        dates.forEach(date => {
          const li = document.createElement('li');
          li.textContent = date;
          datesList.appendChild(li);
        });
        modalOverlay.style.display = 'flex';
      }
    });

    modalCloseBtn.onclick = () => modalOverlay.style.display = 'none';
    modalOverlay.onclick = e => {
      if (e.target === modalOverlay) modalOverlay.style.display = 'none';
    }
  </script>

</body>

</html>
